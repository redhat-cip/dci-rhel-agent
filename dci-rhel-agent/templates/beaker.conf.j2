dhcp-range={{ beaker_lab.dhcp_start }},{{ beaker_lab.dhcp_end }},255.255.255.0
dhcp-ignore=tag:!known
dhcp-option=option:router,{{ beaker_lab.jumpbox_ip }}

# Use this server as a time and name server for machines in the lab
dhcp-option=option:dns-server,0.0.0.0
dhcp-option=option:ntp-server,0.0.0.0

# Legacy BIOS
#dhcp-match=set:bios,option:client-arch,0
# 64 bit x86 EFI
#dhcp-match=set:efi-x86_64,option:client-arch,7
# 64 bit x86 EFI (obsolete)
#dhcp-match=set:efi-x86_64,option:client-arch,9
# 64 bit ARM EFI
#dhcp-match=set:efi-ARM64,option:client-arch,11

#enable-tftp
#tftp-root=/var/lib/tftpboot

#dhcp-boot=tag:bios,"pxelinux.0"
#dhcp-boot=tag:efi-x86_64,"BOOTX64.EFI"
#dhcp-boot=tag:efi-ARM64,"BOOTAA64.EFI"

{% for system in beaker_lab.system_inventory %}
dhcp-boot=tag:{{ system }}_boot,bootloader/{{ system }}/image,{{ beaker_lab.jumpbox_ip }}
{% endfor %}

{% for system in beaker_lab.system_inventory %}
dhcp-host={{ beaker_lab.system_inventory[system].mac }},{{ system }},{{ beaker_lab.system_inventory[system].ip_address }},set:{{ system }}_boot
{% endfor %}

# vim: set ft=dnsmasq:
