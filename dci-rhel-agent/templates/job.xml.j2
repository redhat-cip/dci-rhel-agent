<job retention_tag="Scratch">
    <whiteboard></whiteboard>
    <recipeSet priority="Normal">
        <recipe ks_meta="selinux=--permissive autopart_type=plain harness='restraint'" whiteboard="">
            <distroRequires>
                <and>
                    <distro_name op="=" value="{{ distro_name }}"/>
                    <distro_arch op="=" value="{{ distro_arch }}"/>
                </and>
            </distroRequires>
            {% if fqdn is defined %}
                    <hostRequires force="{{ fqdn }}" />
            {% else %}
            <hostRequires/>
            {% endif %}
            <repos>
            {% if topic.startswith('RHEL-7') %}
              <repo name="extraos-local" url="http://{{ local_repo_ip }}/extraos"/>
            {% endif %}
            {% if topic.startswith('RHEL-8') %}
              <repo name="redhat-local" url="http://{{ local_repo_ip }}/{{ topic }}"/>
              <repo name="appstream-local" url="http://{{ local_repo_ip }}/appstream"/>
            {% endif %}
            {% for repo in repos %}
              <repo name="{{ repo.name }}" url="{{ repo.url }}"/>
            {% endfor %}
            </repos>
            <partitions/>
            <task name="/distribution/install" role="STANDALONE">
                <params>
                </params>
            </task>
            <task name="/distribution/reservesys"/>
        </recipe>
    </recipeSet>
</job>